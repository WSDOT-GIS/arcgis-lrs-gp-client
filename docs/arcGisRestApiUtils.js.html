<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: arcGisRestApiUtils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: arcGisRestApiUtils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>ï»¿(function (root, factory) {
    if (typeof define === 'function' &amp;&amp; define.amd) {
        // AMD. Register as an anonymous module.
        define(["./objectUtils"], factory);
    } else if (typeof module === 'object' &amp;&amp; module.exports) {
        module.exports = factory(require('./objectUtils.js'));
    } else {
        // Browser globals
        root.arcGisRestApiUtils = factory(root.objectUtils);
    }
}(this, function (objectUtils) {

    /**
     * A module with ArcGIS REST API utility functions.
     * @exports arcGisRestApiUtils
     */

    /**
     * ArcGIS REST API feature set.
     * @external FeatureSet
     * @see {@link http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/FeatureSet_object/02r3000002mn000000/|FeatureSet object}
     */

    /**
     * ArcGIS REST API geometry definitions.
     * @external Geometry
     * @see {@link http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/Geometry_objects/02r3000000n1000000/|Geometry objects}
     */

    /**
     * ArcGIS REST API spatial reference
     * @external SpatialReference
     * @see {@link http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/Geometry_objects/02r3000000n1000000/|Geometry objects}
     */

    /**
     * Gets the type of the geometry based on its properties.
     * @param {external:Geometry} geometry - a geometry.
     * @param {Boolean} [useEsriPrefix=false] - If true, the output name will be prefixed with "esri". E.g., "point" vs. "esriPoint".
     * @returns {string} The type of geometry: point, multipoint, polyline, polygon, or envelope.
     */
    function getGeometryType(geometry, useEsriPrefix) {
        if (!geometry) {
            throw new TypeError("The geometry parameter cannot be null or undefined.");
        }

        var output;
        var esriPrefix = "esriGeometry";

        if (objectUtils.hasAllProperties(geometry, "x", "y")) {
            output = useEsriPrefix ? esriPrefix + "Point" : "point";
        } else if (geometry.points) {
            output = useEsriPrefix ? esriPrefix + "Multipoint" : "multipoint";
        } else if (objectUtils.hasAnyProperties(geometry, "paths", "curvePaths")) {
            output = useEsriPrefix ? esriPrefix + "Polyline" : "polyline";
        } else if (objectUtils.hasAnyProperties(geometry, "rings", "curveRings")) {
            output = useEsriPrefix ? esriPrefix + "Polygon" : "polygon";
        } else if (objectUtils.hasAllProperties(geometry, "xmin", "ymin", "xmax", "ymax")) {
            output = useEsriPrefix ? esriPrefix + "Envelope" : "envelope";
        }

        return output;
    }

    /**
     * Creates a feature set using the specified geometry
     * @param {external:Geometry[]} geometries - Geometries
     * @param {(external:SpatialReference|number)} [spatialReference] - Defines the spatial reference for the feature set. Unneeded if the geometries have spatialReference properties defined.
     * @returns {external:FeatureSet} a feature set
     */
    function createFeatureSet(geometries, spatialReference) {
        if (!geometries) {
            throw new TypeError("Input cannot be null or undefined.");
        }
        else if (!Array.isArray(geometries)) {
            // Force single input geometry into an array.
            geometries = [geometries];
        } else if (!geometries.length) {
            throw new Error("geometries array has no elements.");
        }

        // If spatial reference is a number, convert it to a spatial reference object.
        if (spatialReference &amp;&amp; typeof spatialReference === "number") {
            spatialReference = {
                wkid: spatialReference
            };
        }

        var output = {};

        output.geometryType = getGeometryType(geometries[0], true);
        output.spatialReference = spatialReference || geometries[0].spatialReference;
        if (!output.spatialReference) {
            delete output.spatialReference;
        }
        output.features = geometries.map(function (g) {
            if (g.spatialReference) {
                delete g.spatialReference;
            }
            var feature = {
                geometry: g
            };
            return feature;
        });

        return output;
    }

    /**
     * Gets the geometry type of a {@link external:FeatureSet}.
     * @param {external:FeatureSet} featureSet - A feature set.
     * @returns {string} A string with an "esri"-prefixed geometry type name.
     * @throws {Error} Throws an error if there is neither a geometryType property
     * on the featureSet object nor any features with geometry.
     */
    function getFeatureSetGeometryType(featureSet) {
        if (featureSet.geometryType) {
            return featureSet.geometryType;
        } else if (featureSet.features &amp;&amp; featureSet.features.length > 0) {
            return getGeometryType(featureSet.features[0].geometry, true);
        } else {
            throw new Error("Unable to determine geometry type");
        }
    }

    return {
        getGeometryType: getGeometryType,
        getFeatureSetGeometryType: getFeatureSetGeometryType,
        createFeatureSet: createFeatureSet
    };

}));</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-EventTableProperties.html">EventTableProperties</a></li><li><a href="module-LinearUnit.html">LinearUnit</a></li><li><a href="module-LrsGP.html">LrsGP</a></li><li><a href="module-LrsGPParameters.html">LrsGPParameters</a></li><li><a href="module-LrsGPWorker.html">LrsGPWorker</a></li></ul><h3>Externals</h3><ul><li><a href="external-FeatureSet.html">FeatureSet</a></li><li><a href="external-Geometry.html">Geometry</a></li><li><a href="external-GPResult.html">GPResult</a></li><li><a href="external-SpatialReference.html">SpatialReference</a></li></ul><h3>Classes</h3><ul><li><a href="module-EventTableProperties.html">EventTableProperties</a></li><li><a href="module-LinearUnit.html">LinearUnit</a></li><li><a href="module-LrsGP.html">LrsGP</a></li><li><a href="module-LrsGPParameters.html">LrsGPParameters</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Apr 06 2016 12:57:36 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
